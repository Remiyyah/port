<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeremy Flagg | Portfolio</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">

    
</head>
<body>

    <canvas id="canvas-network"></canvas>

    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div class="terminal-container" id="terminalContainer">
        <div class="terminal-bar">
            <div class="terminal-buttons">
                <div class="terminal-button red"></div>
                <div class="terminal-button yellow"></div>
                <div class="terminal-button green"></div>
            </div>
        </div>
        <div class="terminal" id="terminal"></div>
    </div>

    <nav class="nav-container" id="navContainer">
        <div class="nav-links">
            <a href="#mainContent" class="nav-link">Home</a>
            <a href="#techStack" class="nav-link">Skills</a>
            <a href="#projects" class="nav-link">Projects</a>
            <a href="#about" class="nav-link">About</a>
            <a href="#contact" class="nav-link">Contact</a>
        </div>
    </nav>

    <div class="main-content-container" id="mainContentContainer">
        
        <div class="main-content" id="mainContent">
            <div class="container">
                <div class="text-content">
                    <h1>Hi, I am <span class="highlight">Jeremy Flagg.</span></h1>
                    <div class="social-links">
                        <a href="#"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub"></a>
                        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/145/145807.png" alt="LinkedIn"></a>
                        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email"></a>
                    </div>
                    <a href="#" class="resume-button">My Resume</a>
                    <p class="dynamic-text">I am a <span id="changing-text"></span><span class="typing-cursor-blink"></span></p>
                </div>
                <div class="image-container">
                    <img src="images/me4.PNG" alt="Jeremy Flagg" onerror="this.src='https://via.placeholder.com/450x450/333/fff?text=Jeremy+Flagg'">
                </div>
            </div>
            <div class="scroll-indicator" onclick="document.getElementById('techStack').scrollIntoView({behavior: 'smooth'})">
                <span>‚Üì</span>
            </div>
        </div>

        <section class="tech-stack" id="techStack">
            <div class="tech-stack-container">
                <h2 data-aos="fade-up">MY SKILLS</h2>
                <h1 data-aos="fade-up" data-aos-delay="100">Tech Stack.</h1>
                <!-- <h3 data-aos="fade-up" data-aos-delay="200">TECHNICAL LANGUAGES</h3> -->
                <h3 data-aos="fade-up" data-aos-delay="200">Cloud Technologies</h3>
                
                <div class="table-container">
                    <table class="custom-table">
                        <thead>
                            <tr>
                                <th>Skill</th>
                                <th>Proficiency</th>
                                <th>Experience</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>AWS</td>
                                <td>Intermediate</td>
                                <td>2 years</td>
                            </tr>
                            <tr>
                                <td>Oracle</td>
                                <td>Intermediate</td>
                                <td>2 years</td>
                            </tr>
                            <tr>
                                <td>Docker</td>
                                <td>Intermediate</td>
                                <td>2.5 years</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="spheres">
                    <div class="sphere" data-icon="python" data-aos="zoom-in" data-aos-delay="100"></div>
                    <div class="sphere" data-icon="html5" data-aos="zoom-in" data-aos-delay="200"></div>
                    <div class="sphere" data-icon="css3" data-aos="zoom-in" data-aos-delay="300"></div>
                    <div class="sphere" data-icon="javascript" data-aos="zoom-in" data-aos-delay="400"></div>
                    <div class="sphere" data-icon="typescript" data-aos="zoom-in" data-aos-delay="500"></div>
                    <div class="sphere" data-icon="sql" data-aos="zoom-in" data-aos-delay="600"></div>
                    <div class="sphere" data-icon="react" data-aos="zoom-in" data-aos-delay="700"></div>
                    <div class="sphere" data-icon="nodejs" data-aos="zoom-in" data-aos-delay="800"></div>
                </div>
            </div>
            <div class="scroll-indicator" onclick="document.getElementById('projects').scrollIntoView({behavior: 'smooth'})">
                <span>‚Üì</span>
            </div>
        </section>

        <section class="projects" id="projects">
            <div class="projects-container">
                <h2 data-aos="fade-up">MY WORK</h2>
                <h1 data-aos="fade-up" data-aos-delay="100">Projects.</h1>
                
                <!-- Updated Header with Button -->
                <div class="projects-header" data-aos="fade-up" data-aos-delay="200">
                    <h3>RECENT DEVELOPMENTS</h3>
                    <a href="lab.html" class="view-more-btn">View More</a>
                </div>

                <div class="project-grid">

                    <div class="project-card" data-aos="fade-up" data-aos-delay="100">
                        <div class="project-image" style="background-image: url('https://via.placeholder.com/600x400/377DFF/ffffff?text=BayBound+Rentals');"></div>
                        <div class="project-content">
                            <h3 class="project-title">BayBound Rentals</h3>
                            <p class="project-description">A responsive rental booking website for properties across the Bay Area.</p>
                            <div class="project-tech">
                                <span class="tech-tag">HTML</span>
                                <span class="tech-tag">CSS</span>
                                <span class="tech-tag">JavaScript</span>
                            </div>
                            <div class="project-links">
                                <button class="open-baybound">View Project</button>
                            </div>
                        </div>
                    </div>

                    <div class="project-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="project-image" style="background-image: url('https://via.placeholder.com/600x400/16213e/ffffff?text=Task+App');"></div>
                        <div class="project-content">
                            <h3 class="project-title">Task Management App</h3>
                            <p class="project-description">A productivity application with drag-and-drop functionality and team collaboration.</p>
                            <div class="project-tech">
                                <span class="tech-tag">Vue.js</span>
                                <span class="tech-tag">Firebase</span>
                                <span class="tech-tag">CSS3</span>
                            </div>
                            <div class="project-links">
                                <button class="open-taskapp">Live Demo</button>
                                <a href="#">GitHub</a>
                            </div>
                        </div>
                    </div>

                    <div class="project-card" data-aos="fade-up" data-aos-delay="300">
                        <div class="project-image" style="background-image: url('https://via.placeholder.com/600x400/0f3460/ffffff?text=Weather+App');"></div>
                        <div class="project-content">
                            <h3 class="project-title">Weather Dashboard</h3>
                            <p class="project-description">A responsive weather application with location detection and 7-day forecast.</p>
                            <div class="project-tech">
                                <span class="tech-tag">JavaScript</span>
                                <span class="tech-tag">API Integration</span>
                                <span class="tech-tag">Chart.js</span>
                            </div>
                            <div class="project-links">
                                <button class="open-weather">Live Demo</button>
                                <a href="#">GitHub</a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <section class="about" id="about">
            <div class="about-container">
                <h2 data-aos="fade-up">GET TO KNOW ME</h2>
                <h1 data-aos="fade-up" data-aos-delay="100">About Me.</h1>
                <div class="about-content">
                    <div class="about-text" data-aos="fade-right" data-aos-delay="200">
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vitae risus vel velit placerat ultrices vel id augue.</p>
<p>Curabitur euismod urna sit amet massa pulvinar, quis consectetur neque tincidunt. Integer vel mauris eget ligula elementum ultrices.</p>
<p>Donec sit amet sapien et sapien pretium viverra. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.</p>

                    </div>
                    <div class="about-image" data-aos="fade-left" data-aos-delay="200">
                        <img src="images/me4.PNG" alt="About Jeremy">
                    </div>
                </div>
            </div>
            <div class="scroll-indicator" onclick="document.getElementById('contact').scrollIntoView({behavior: 'smooth'})">
                <span>‚Üì</span>
            </div>
        </section>

        <section class="contact" id="contact">
            <div class="contact-container">
                <h2 data-aos="fade-up">GET IN TOUCH</h2>
                <h1 data-aos="fade-up" data-aos-delay="100">Contact.</h1>
                <div class="contact-content">
                    <div class="contact-info" data-aos="fade-right" data-aos-delay="200">
                        <div class="contact-item">
                            <div class="contact-icon"><i>‚úâÔ∏è</i></div>
                            <div>
                                <h4>Email</h4>
                                <p>jeremyflagg12@gmail.com</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon"><i>üìç</i></div>
                            <div>
                                <h4>Location</h4>
                                <p>Memphis, TN</p>
                            </div>
                            <div id="mini-earth-container"></div>
                        </div>
                    </div>
                    <div class="contact-form" data-aos="fade-left" data-aos-delay="200">
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" required>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" required rows="4"></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>&copy; 2025 Jeremy Flagg. All Rights Reserved.</p>
        </footer>
    </div>

    <div id="bayboundModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <iframe src="https://remiyyah.github.io/BayBound-Rentals/" class="modal-iframe" loading="lazy"></iframe>
        </div>
    </div>

    <div id="taskAppModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <iframe src="https://remiyyah.github.io/apex/" class="modal-iframe" loading="lazy"></iframe>
        </div>
    </div>

    <div id="weatherModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <iframe src="https://remiyyah.github.io/Justice-Law-Website/" class="modal-iframe" loading="lazy"></iframe>
        </div>
    </div>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Check if animation has already played in this session
            const hasPlayed = sessionStorage.getItem('terminalPlayed');

            if (hasPlayed) {
                // SKIP ANIMATION logic
                const terminalContainer = document.getElementById("terminalContainer");
                const mainContentContainer = document.getElementById("mainContentContainer");
                const navContainer = document.getElementById("navContainer");

                // Hide terminal immediately
                if (terminalContainer) terminalContainer.style.display = "none";
                
                // Show content immediately
                if (mainContentContainer) {
                    mainContentContainer.style.display = "block";
                    mainContentContainer.style.opacity = 1;
                }
                
                // Show nav immediately
                if (navContainer) navContainer.style.display = "flex";

                // Start typing effect immediately
                startTypingEffect();

                // Initialize AOS immediately
                AOS.init({
                    duration: 1000,
                    once: true,
                });
                
                // Ensure particles are sized correctly
                if(typeof resizeParticles === 'function') resizeParticles();

            } else {
                // PLAY ANIMATION (First time)
                typeTerminalText();
                
                // Start typing effect after delay
                setTimeout(startTypingEffect, 6500);
            }
            
            // 3. Setup Modals
            setupModal('bayboundModal', '.open-baybound');
            setupModal('taskAppModal', '.open-taskapp');
            setupModal('weatherModal', '.open-weather');

            // 4. Initialize Cursor Effect
            initCursor();

            // 5. Initialize Tilt Effect
            initTilt();
        });

        /* --- CURSOR LOGIC --- */
        function initCursor() {
            const cursorDot = document.querySelector('.cursor-dot');
            const cursorOutline = document.querySelector('.cursor-outline');
            const hoverTargets = document.querySelectorAll('a, button, input, textarea, .sphere, .project-card, .close-modal, .scroll-indicator, .view-more-btn');

            window.addEventListener('mousemove', (e) => {
                const posX = e.clientX;
                const posY = e.clientY;

                // Dot follows instantly
                cursorDot.style.left = `${posX}px`;
                cursorDot.style.top = `${posY}px`;

                // Outline follows with slight delay using animate for smoothness
                cursorOutline.animate({
                    left: `${posX}px`,
                    top: `${posY}px`
                }, { duration: 500, fill: "forwards" });
            });

            // Add hover effect class to body
            hoverTargets.forEach(el => {
                el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
                el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
            });
        }

        /* --- 3D TILT LOGIC --- */
        function initTilt() {
            const cards = document.querySelectorAll('.project-card');

            cards.forEach(card => {
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    // Calculate rotation based on mouse position
                    // Limit rotation to 10 degrees max
                    const rotateX = ((y - centerY) / centerY) * -10; 
                    const rotateY = ((x - centerX) / centerX) * 10;

                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
                });

                card.addEventListener('mouseleave', () => {
                    // Reset position smoothly
                    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
                });
            });
        }

        /* --- CONTACT FORM LOGIC --- */
        document.getElementById("contactForm").addEventListener("submit", async (e) => {
            e.preventDefault();
        
            const data = {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                message: document.getElementById("message").value
            };
        
            try {
                const response = await fetch("https://akijzaomjk.execute-api.us-east-1.amazonaws.com/submit", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });
        
                const result = await response.json();
                alert(result.message || "Submitted!");
            } catch (err) {
                console.error(err);
                alert("Submission failed. Try again.");
            }
        });

        /* --- TERMINAL ANIMATION LOGIC --- */
        const terminalElement = document.getElementById("terminal");
        const terminalContainer = document.getElementById("terminalContainer");
        const mainContentContainer = document.getElementById("mainContentContainer");
        const navContainer = document.getElementById("navContainer");

        const terminalCommands = [
            "user@portfolio:~$ ssh connect my-website",
            "Connecting...",
            "Authenticating...",
            "Access Granted!",
            "Loading dashboard..."
        ];

        let commandIndex = 0;
        let charIndex = 0;
        let typingSpeed = 10; // Faster typing

        function typeTerminalText() {
            if (commandIndex < terminalCommands.length) {
                if (charIndex < terminalCommands[commandIndex].length) {
                    terminalElement.innerHTML += terminalCommands[commandIndex][charIndex];
                    charIndex++;
                    setTimeout(typeTerminalText, typingSpeed);
                } else {
                    terminalElement.innerHTML += "\n";
                    commandIndex++;
                    charIndex = 0;
                    setTimeout(typeTerminalText, 600); // Pause between lines
                }
            } else {
                finishTerminal();
            }
        }

        function finishTerminal() {
            // Set flag so it doesn't run again this session. 
            sessionStorage.setItem('terminalPlayed', 'true');

            setTimeout(() => {
                terminalContainer.style.opacity = 0;
                setTimeout(() => {
                    terminalContainer.style.display = "none";
                    mainContentContainer.style.display = "block";
                    
                    // Trigger reflow for transition
                    setTimeout(() => {
                        mainContentContainer.style.opacity = 1;
                        navContainer.style.display = "flex";
                        
                        // Resize particles once visible
                        if(typeof resizeParticles === 'function') resizeParticles();
                        
                        // Initialize AOS *AFTER* content is visible
                        AOS.init({
                            duration: 1000,
                            once: true,
                        });

                    }, 50);
                }, 500);
            }, 800);
        }

        /* --- TYPING EFFECT LOGIC --- */
        const words = ["Developer...", "Designer...", "CS Student...", "Problem Solver..."];
        let wordIndex = 0;
        let letterIndex = 0;
        let deleting = false;

        function startTypingEffect() {
            const textElement = document.getElementById("changing-text");
            if (!textElement) return;

            const currentWord = words[wordIndex];
            
            if (!deleting) {
                textElement.textContent = currentWord.substring(0, letterIndex + 1);
                letterIndex++;
                if (letterIndex === currentWord.length) {
                    setTimeout(() => deleting = true, 1500); // Wait before deleting
                    setTimeout(startTypingEffect, 1500);
                    return;
                }
            } else {
                textElement.textContent = currentWord.substring(0, letterIndex - 1);
                letterIndex--;
                if (letterIndex === 0) {
                    deleting = false;
                    wordIndex = (wordIndex + 1) % words.length;
                }
            }
            setTimeout(startTypingEffect, deleting ? 50 : 100);
        }

        /* --- MODAL LOGIC HELPER --- */
        function setupModal(modalId, btnClass) {
            const modal = document.getElementById(modalId);
            const btn = document.querySelector(btnClass);
            const close = modal ? modal.querySelector(".close-modal") : null;

            if (modal && btn && close) {
                btn.addEventListener("click", (e) => {
                    e.preventDefault(); // Prevent scroll jump
                    modal.style.display = "flex";
                });
                
                close.addEventListener("click", () => {
                    modal.style.display = "none";
                });

                window.addEventListener("click", (e) => {
                    if (e.target === modal) {
                        modal.style.display = "none";
                    }
                });
            }
        }

        /* --- NAVBAR SCROLL EFFECT --- */
        window.addEventListener('scroll', function() {
            const scrollPosition = window.scrollY;
            if (navContainer) {
                if (scrollPosition > 100) {
                    navContainer.style.background = "rgba(0, 0, 0, 0.95)";
                } else {
                    navContainer.style.background = "rgba(0, 0, 0, 0.8)";
                }
            }
        });
    </script>
    <script>
        async function updateProjectCards() {
            try {
                const res = await fetch("https://n6um49n4y1.execute-api.us-east-1.amazonaws.com/projects");
                let projects = await res.json(); // Note: Changed const to let
    
                // --- REORDER LOGIC HERE ---
                projects.reverse(); 
                // --------------------------
    
                const cards = document.querySelectorAll(".project-card");
    
                projects.forEach((p, i) => {
                    if (!cards[i]) return;
    
                    const titleEl = cards[i].querySelector(".project-title");
                    if (titleEl) titleEl.textContent = p.title;
    
                    const descEl = cards[i].querySelector(".project-description");
                    if (descEl) descEl.textContent = p.description;
    
                    const techEl = cards[i].querySelector(".project-tech");
                    if (techEl && p.tech) {
                        techEl.innerHTML = p.tech
                            .split(",")
                            .map(t => `<span class="tech-tag">${t.trim()}</span>`)
                            .join("");
                    }
                });
    
            } catch (err) {
                console.error("Failed to load project data:", err);
            }
        }
        
        updateProjectCards();
    </script>
        
    <script>
        const canvas = document.getElementById('canvas-network');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particlesArray;
        let mouse = { x: null, y: null, radius: 150 };

        window.addEventListener('mousemove', function(event) {
            mouse.x = event.x;
            mouse.y = event.y;
        });

        class Particle {
            constructor(x, y, directionX, directionY, size, color) {
                this.x = x;
                this.y = y;
                this.directionX = directionX;
                this.directionY = directionY;
                this.size = size;
                this.color = color;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = '#377DFF';
                ctx.fill();
            }
            update() {
                // Bounce off edges
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                
                // Move
                this.x += this.directionX;
                this.y += this.directionY;

                // Mouse interaction
                let dx = mouse.x - this.x;
                let dy = mouse.y - this.y;
                let distance = Math.sqrt(dx*dx + dy*dy);
                if (distance < mouse.radius + this.size){
                    if (mouse.x < this.x && this.x < canvas.width - this.size * 10) this.x += 2;
                    if (mouse.x > this.x && this.x > this.size * 10) this.x -= 2;
                    if (mouse.y < this.y && this.y < canvas.height - this.size * 10) this.y += 2;
                    if (mouse.y > this.y && this.y > this.size * 10) this.y -= 2;
                }
                this.draw();
            }
        }

        function initParticles() {
            particlesArray = [];
            // Calculate number of particles based on screen area to prevent lag on huge screens
            let numberOfParticles = (canvas.height * canvas.width) / 10000;
            for (let i = 0; i < numberOfParticles; i++) {
                let size = (Math.random() * 2) + 1;
                let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2);
                let directionX = (Math.random() * 0.4) - 0.2;
                let directionY = (Math.random() * 0.4) - 0.2;
                let color = '#377DFF';
                particlesArray.push(new Particle(x, y, directionX, directionY, size, color));
            }
        }

        function animateParticles() {
            requestAnimationFrame(animateParticles);
            ctx.clearRect(0,0,innerWidth, innerHeight);
            
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
            }
            connectParticles();
        }

        function connectParticles() {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x))
                    + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    
                    // Connection distance
                    if (distance < (canvas.width/7) * (canvas.height/7)) {
                        opacityValue = 1 - (distance/20000);
                        ctx.strokeStyle = 'rgba(55, 125, 255,' + opacityValue * 0.15 + ')'; // Low opacity for subtle look
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function resizeParticles(){
            canvas.width = innerWidth;
            canvas.height = innerHeight;
            initParticles();
        }

        window.addEventListener('resize', resizeParticles);

        initParticles();
        animateParticles();
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const container = document.getElementById('mini-earth-container');
        if (!container) return;

        // 1. Setup Scene
        const scene = new THREE.Scene();
        
        // 2. Setup Camera 
        const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
        camera.position.z = 6;

        // 3. Setup Renderer
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // 4. Create Earth
        const textureLoader = new THREE.TextureLoader();
        const earthGeometry = new THREE.SphereGeometry(2, 64, 64);
        
        const earthMaterial = new THREE.MeshPhongMaterial({
            map: textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js/examples/textures/planets/earth_atmos_2048.jpg'),
            specular: new THREE.Color(0x333333),
            shininess: 5
        });
        const earth = new THREE.Mesh(earthGeometry, earthMaterial);
        scene.add(earth);

        // 5. Create Clouds
        const cloudGeometry = new THREE.SphereGeometry(2.05, 64, 64);
        const cloudMaterial = new THREE.MeshPhongMaterial({
            map: textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js/examples/textures/planets/earth_clouds_1024.png'),
            transparent: true,
            opacity: 0.4,
            side: THREE.DoubleSide
        });
        const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
        scene.add(clouds);

        // 6. Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(5, 3, 5);
        scene.add(directionalLight);

        // 7. Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enableZoom = false; 
        controls.autoRotate = true;
        controls.autoRotateSpeed = 2.0;

        // 8. Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            earth.rotation.y += 0.001;
            clouds.rotation.y += 0.0015;
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // 9. RESIZE OBSERVER
        const resizeObserver = new ResizeObserver(entries => {
            for (let entry of entries) {
                const width = entry.contentRect.width;
                const height = entry.contentRect.height;
                if (width > 0 && height > 0) {
                    renderer.setSize(width, height);
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                }
            }
        });
        resizeObserver.observe(container);
    });
    </script>
</body>
</html>